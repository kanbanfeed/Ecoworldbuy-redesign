<style>
    /* --- SPLIT LOGIN LAYOUT (Eco Theme) --- */
    .login-wrapper {
        display: flex;
        min-height: 100vh;
        background: white;
    }
    
    /* LEFT VISUAL SIDE */
    .visual-side {
        width: 45%;
        /* Nature/Eco Image */
        background-image: url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80');
        background-size: cover;
        background-position: center;
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        padding: 60px;
        color: white;
    }

    /* Green Overlay */
    .visual-overlay {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(to bottom, rgba(21, 128, 61, 0.4), rgba(2, 48, 32, 0.9)); 
        z-index: 1;
    }

    .visual-content { position: relative; z-index: 2; }

    /* RIGHT FORM SIDE */
    .form-side {
        flex: 1;
        display: flex; align-items: center; justify-content: center;
        padding: 40px;
    }
    .login-container { width: 100%; max-width: 400px; }

    /* Inputs */
    .form-control-custom {
        width: 100%; padding: 14px; margin-bottom: 20px;
        border: 1px solid #e5e5e5; border-radius: 8px;
        background: #f9fafb; outline: none; font-size: 0.95rem;
        font-family: 'Inter', sans-serif;
    }
    .form-control-custom:focus { 
        border-color: #15803d; /* Green Focus */
        background: white; 
        box-shadow: 0 0 0 4px rgba(21, 128, 61, 0.1);
    }

    /* Green Button */
    .btn-login {
        width: 100%; padding: 15px;
        background: #15803d; /* Eco Green */
        color: white;
        border: none; border-radius: 50px;
        font-weight: 600; cursor: pointer; transition: 0.2s;
        text-transform: uppercase; letter-spacing: 1px; font-size: 0.8rem;
    }
    .btn-login:hover { background: #14532d; transform: translateY(-1px); }

    /* Links */
    .register-link {
        display: block; text-align: center; margin-top: 20px;
        color: #666; font-size: 0.9rem; text-decoration: none;
    }

    .register-link span { color: #15803d; font-weight: 700; }

    @media (max-width: 900px) { .visual-side { display: none; } }
</style>

<div class="login-wrapper">
    <div class="visual-side">
        <div class="visual-overlay"></div>
        <div class="visual-content">
            <h1 style="font-family: 'Playfair Display', serif; font-size: 3rem; margin-bottom: 15px; line-height: 1.1;">Conscious<br>Living.</h1>
            <p style="opacity: 0.9; font-size: 1.1rem;">Access exclusive sustainable goods and rewards with your Crowbar membership.</p>
        </div>
    </div>

    <div class="form-side">
        <div class="login-container">
            <div style="text-align: center; margin-bottom: 40px;">
                <div style="width: 50px; height: 50px; background: #dcfce7; color: #15803d; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 1.5rem;">
                    <i class="bi bi-bag-heart-fill"></i>
                </div>
                <h2 style="font-family: 'Playfair Display', serif; font-weight: 700; color: #111; font-size: 2rem;">Welcome to EcoWorldBuy </h2>
                <p style="color: #666; font-size: 0.9rem;">Please enter your Crowbar details.</p>
            </div>

            <label style="font-size: 0.75rem; font-weight: 700; color: #111; margin-bottom: 5px; display: block; text-transform: uppercase; letter-spacing: 0.5px;">Email</label>
            <input type="email" id="email" class="form-control-custom" placeholder="name@example.com">

            <label style="font-size: 0.75rem; font-weight: 700; color: #111; margin-bottom: 5px; display: block; text-transform: uppercase; letter-spacing: 0.5px;">Password</label>
            <input type="password" id="password" class="form-control-custom" placeholder="••••••••">

            <button id="loginBtn" class="btn-login">Sign In</button>
            <p id="msg" style="text-align: center; margin-top: 15px; color: #ef4444; font-size: 0.85rem; font-weight: 600;"></p>

            <a href="https://www.crowbarltd.com/register" target="_blank" class="register-link">
                New Member? <span>Create Crowbar ID &rarr;</span>
            </a>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // CONFIG
    const SB_URL = 'https://zfxnhbymlhvukeqmsyhj.supabase.co';
    const SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpmeG5oYnltbGh2dWtlcW1zeWhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4MTIyMTIsImV4cCI6MjA3NzM4ODIxMn0.kKB1RsLvXJuROPlBY5bWeBzTWDGGe_UTouWkfSc7RXs'; // <--- PASTE YOUR KEY HERE
    const client = supabase.createClient(SB_URL, SB_KEY);

    document.getElementById('loginBtn').addEventListener('click', async () => {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const msg = document.getElementById('msg');
        const btn = document.getElementById('loginBtn');

        if(!email || !password) { msg.innerText = "Please enter credentials"; return; }
        
        btn.innerText = "Verifying...";
        msg.innerText = "";
        
        const { data, error } = await client.auth.signInWithPassword({ email, password });

        if(error) {
            msg.innerText = error.message;
            btn.innerText = "Sign In";
        } else {
            msg.innerText = "Authorized.";
            msg.style.color = "#15803d";
            localStorage.setItem('crowbar_session', data.session.access_token);
            localStorage.setItem('crowbar_user', JSON.stringify(data.user));
            setTimeout(() => window.location.href = '/', 1000);
        }
    });
</script>